<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <record id="machine_type_form_view" model="ir.ui.view">
            <field name="name">machine.type.form.view</field>
            <field name="model">product.template</field>
            <field name="arch" type="xml">
                <form string="Machines">
                    <header>
                        <field name="is_product_variant" invisible="1"/>
                        <button string="Configure Variants" type="object"
                                name="action_open_attribute_values"
                                attrs="{'invisible': ['|', ('attribute_line_ids', '&lt;=', 0), ('is_product_variant', '=', True)]}"
                                groups="product.group_product_variant"/>
                    </header>
                    <sheet>
                        <field name="image_1920" widget='image' class="oe_avatar"
                               options='{"zoom": true, "preview_image":"image_128"}'/>
                        <div class="oe_title">
                            <label for="name" string="Machine Name"/>
                            <h1>
                                <field name="name" placeholder="Eg:Machine 230KV"/>
                            </h1>
                        </div>
                        <div>
                            <field name="is_machine"/>
                            <label for="is_machine"/>
                        </div>
                        <notebook>
                            <page name="machine_details" string="Machine Details"
                                  attrs="{'invisible': [('is_machine', '=', False)]}">
                                <group string="Machine Details">
                                    <group class="o_label_nowrap">
                                        <field name="machine_serial_number"/>
                                        <field name="category"/>
                                        <field name="made"/>
                                        <field name="make"/>
                                        <field name="kilo"/>
                                        <field name="kva"/>
                                        <field name="hertz"/>
                                        <field name="item_code"/>
                                        <field name="type" invisible="1"/>
                                    </group>
                                    <group>
                                        <field name="horsepower"/>
                                        <field name="rpm"/>
                                        <field name="pole"/>
                                        <field name="volt"/>
                                        <field name="amps"/>
                                        <field name="motor_no"/>
                                    </group>
                                    <group>
                                        <field name="taxes_id" widget="many2many_tags"/>
                                        <field name="categ_id"/>
                                    </group>
                                </group>
                            </page>
                            <page name="variants" string="Variants" groups="product.group_product_variant">
                                <field name="attribute_line_ids" widget="one2many" context="{'show_attribute': False}">
                                    <tree string="Variants" editable="bottom">
                                        <field name="attribute_id" attrs="{'readonly': [('id', '!=', False)]}"/>
                                        <field name="value_ids" widget="many2many_tags"
                                               options="{'no_create_edit': True}"
                                               context="{'default_attribute_id': attribute_id, 'show_attribute': False}"/>
                                    </tree>
                                </field>
                                <p class="oe_grey oe_edit_only">
                                    <strong>Warning</strong>: adding or deleting attributes
                                    will delete and recreate existing variants and lead
                                    to the loss of their possible customizations.
                                </p>
                            </page>
                            <page name="machine_service_details" string="Machine Service Details"
                                  attrs="{'invisible': [('is_machine', '=', False)]}">
                                <group string="Service Details">
                                    <field name="service_required" nolabel="1">
                                        <tree editable="bottom">
                                            <field name="mechanical_works"/>
                                            <field name="total_hours"/>
                                            <field name="cost"/>
                                        </tree>
                                    </field>
                                </group>
                                <group>
                                    <field name="price" force_save="1"/>
                                </group>
                            </page>
                            <page string="Parts Required" attrs="{'invisible': [('is_machine', '=', False)]}">
                                <group string="Spare-Parts Details">
                                    <field name="m_parts_required" nolabel="1">
                                        <tree editable="bottom">
                                            <field name="product_id"/>
                                            <field name="quantity"/>
                                            <field name="product_unit"/>
                                            <field name="cost"/>
                                        </tree>
                                    </field>
                                </group>
                            </page>
                            <page string="Accounting" name="invoicing" groups="account.group_account_user">
                                <group name="properties">
                                    <group string="Receivables">
                                        <field name="property_account_income_id"
                                               domain="[('internal_type','=','other'),('deprecated','=',False)]"
                                               groups="account.group_account_user"/>
                                    </group>
                                    <group string="Payables" name="payables">
                                        <field name="property_account_expense_id"
                                               domain="[('internal_type','=','other'),('deprecated','=',False)]"
                                               groups="account.group_account_user"/>
                                    </group>
                                </group>
                                <group name="accounting"/>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>
        <record id="machine_variant_type_form_view" model="ir.ui.view">
            <field name="name">machine.type.form.view</field>
            <field name="model">product.product</field>
            <field name="arch" type="xml">
                <form string="Machines">
                    <sheet>
                        <field name="image_1920" widget='image' class="oe_avatar"
                               options='{"zoom": true, "preview_image":"image_128"}'/>
                        <div class="oe_title">
                            <label for="name" string="Machine Name"/>
                            <h1>
                                <field name="name" placeholder="Eg:Machine 230KV"/>
                            </h1>
                            <field name="product_template_attribute_value_ids" widget="many2many_tags" readonly="1"
                                   groups="product.group_product_variant"/>
                        </div>
                        <div>
                            <field name="is_machine"/>
                            <label for="is_machine"/>
                        </div>
                        <notebook>
                            <page name="machine_details" string="Machine Details"
                                  attrs="{'invisible': [('is_machine', '=', False)]}">
                                <group string="Machine Details">
                                    <group class="o_label_nowrap">
                                        <field name="machine_serial_number"/>
                                        <field name="category"/>
                                        <field name="made"/>
                                        <field name="make"/>
                                        <field name="kilo"/>
                                        <field name="kva"/>
                                        <field name="hertz"/>
                                        <field name="item_code"/>
                                    </group>
                                    <group>
                                        <field name="horsepower"/>
                                        <field name="rpm"/>
                                        <field name="pole"/>
                                        <field name="volt"/>
                                        <field name="amps"/>
                                        <field name="motor_no"/>
                                    </group>
                                    <group>
                                        <field name="taxes_id" widget="many2many_tags"/>
                                        <field name="categ_id"/>
                                    </group>
                                </group>
                            </page>
                            <page name="machine_service_details" string="Machine Service Details"
                                  attrs="{'invisible': [('is_machine', '=', False)]}">
                                <group string="Service Details">
                                    <field name="service_required" nolabel="1">
                                        <tree editable="bottom">
                                            <field name="mechanical_works"/>
                                            <field name="total_hours"/>
                                            <field name="cost"/>
                                        </tree>
                                    </field>
                                </group>
                                <group>
                                    <field name="lst_price"/>
                                </group>
                            </page>
                            <page string="Parts Required" attrs="{'invisible': [('is_machine', '=', False)]}">
                                <group string="Spare-Parts Details">
                                    <field name="m_parts_required" nolabel="1">
                                        <tree editable="bottom">
                                            <field name="product_id"/>
                                            <field name="quantity"/>
                                            <field name="product_unit"/>
                                            <field name="cost"/>
                                        </tree>
                                    </field>
                                </group>
                            </page>
                            <page string="Accounting" name="invoicing" groups="account.group_account_user">
                                <group name="properties">
                                    <group string="Receivables">
                                        <field name="property_account_income_id"
                                               domain="[('internal_type','=','other'),('deprecated','=',False)]"
                                               groups="account.group_account_user"/>
                                    </group>
                                    <group string="Payables" name="payables">
                                        <field name="property_account_expense_id"
                                               domain="[('internal_type','=','other'),('deprecated','=',False)]"
                                               groups="account.group_account_user"/>
                                    </group>
                                </group>
                                <group name="accounting"/>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>
    </data>
</odoo>

