<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="view_service_quotation_form" model="ir.ui.view">
            <field name="name">view.service.quotation.form</field>
            <field name="model">service.quotation</field>
            <field name="priority" eval="8"/>
            <field name="arch" type="xml">
                <form string="Quotation" create="0" edit="1">
                    <header>
                        <button name="quotation_approve" string="Approve"
                                attrs='{"invisible": [("state", "in", ("approve","reject"))]}'
                                class="oe_highlight" type="object"/>
                        <button name="quotation_reject"
                                attrs='{"invisible": [("state", "in", ("approve","reject"))]}'
                                string="Reject" type="object"/>
                        <field name="state" widget="statusbar"
                               statusbar_visible="draft,approve,reject"/>
                    </header>
                    <sheet>
                        <field name="service_generator_image" widget="image" class="oe_avatar"
                               options='{"size": [100, 100]}'/>
                        <h1>
                            <field name="name" readonly="1"/>
                        </h1>
                        <group>
                            <group>
                                <field name="reference" attrs="{'readonly': [('state', 'in', ('approve','reject'))]}"/>
                                <field name="service_date" widget="date"
                                       attrs="{'readonly': [('state', 'in', ('approve','reject'))]}"/>
                                <field name="service_customer"
                                       attrs="{'readonly': [('state', 'in', ('approve','reject'))]}"/>
                                <label for="street" string="Address:"/>
                                <div class="o_address_format">
                                    <field name="street" placeholder="Street..."
                                           attrs="{'readonly': [('state', 'in', ('approve','reject'))]}"
                                           class="o_address_street"/>
                                    <field name="street2" placeholder="Street 2..."
                                           attrs="{'readonly': [('state', 'in', ('approve','reject'))]}"
                                           class="o_address_street"/>
                                    <field name="city" placeholder="City"
                                           attrs="{'readonly': [('state', 'in', ('approve','reject'))]}"
                                           class="o_address_city"/>
                                    <field name="state_id" class="o_address_state"
                                           attrs="{'readonly': [('state', 'in', ('approve','reject'))]}"
                                           placeholder="State"
                                           options='{"no_open": True, "no_create": True}'
                                           context="{'country_id': country_id, 'zip': zip}"/>
                                    <field name="zip" placeholder="ZIP"
                                           attrs="{'readonly': [('state', 'in', ('approve','reject'))]}"
                                           class="o_address_zip"/>
                                    <field name="country_id" placeholder="Country"
                                           attrs="{'readonly': [('state', 'in', ('approve','reject'))]}"
                                           class="o_address_country"
                                           options="{'no_create_edit': True, 'no_open': True}"/>
                                </div>
                                <field name="company_id" invisible="1"/>
                            </group>
                            <group>
                                <field name="service_type"
                                       attrs="{'readonly': [('state', 'in', ('approve','reject'))]}"/>
                                <field name="service_estimated_cost" invisible="1"
                                       attrs="{'readonly': [('state', 'in', ('approve','reject'))]}"/>
                                <field name="scope_of_work"
                                       attrs="{'readonly': [('state', 'in', ('approve','reject'))]}"/>
                            </group>
                        </group>
                        <notebook>
                            <page name="generator_details" string="Generator Details">
                                <group string="Generator Details">
                                    <group>
                                        <field name="service_generator_id"
                                               options="{'no_create': True, 'no_edit': True}"
                                               context="{'form_view_ref': 'generator_service_maintenance.generator_type_form_view'}"
                                               attrs="{'readonly': [('state', 'in', ('approve','reject'))]}"/>
                                        <field name="service_engine_fsd_number"
                                               attrs="{'readonly': [('state', 'in', ('approve','reject'))]}"/>
                                        <field name="service_generator_name" invisible="1"
                                               attrs="{'readonly': [('state', 'in', ('approve','reject'))]}"/>
                                        <field name="service_generator_kva_ph"
                                               attrs="{'readonly': [('state', 'in', ('approve','reject'))]}"/>
                                        <field name="service_engine_serial_number"
                                               attrs="{'readonly': [('state', 'in', ('approve','reject'))]}"/>
                                    </group>
                                    <group>
                                        <field name="service_engine_model"
                                               attrs="{'readonly': [('state', 'in', ('approve','reject'))]}"/>
                                        <field name="service_alternator_serial_number"
                                               attrs="{'readonly': [('state', 'in', ('approve','reject'))]}"/>
                                        <field name="service_alternator_frame_size"
                                               attrs="{'readonly': [('state', 'in', ('approve','reject'))]}"/>
                                        <field name="service_panel_amf"
                                               attrs="{'readonly': [('state', 'in', ('approve','reject'))]}"/>
                                        <field name="service_panel_amf_make"
                                               attrs="{'readonly': [('state', 'in', ('approve','reject'))]}"/>
                                        <field name="service_last_hours"
                                               attrs="{'readonly': [('state', 'in', ('approve','reject'))]}"/>
                                    </group>
                                    <!-- May need in future -->
                                    <!--                                    <field name="service_generator_spare_parts_ids" mode="tree" nolabel="1">-->
                                    <!--                                        <tree editable="bottom">-->
                                    <!--                                            <field name="service_generator_spare_parts"/>-->
                                    <!--                                            <field name="service_generator_spare_parts_cost"/>-->
                                    <!--                                            <field name="service_generator_spare_parts_qty"/>-->
                                    <!--                                        </tree>-->
                                    <!--                                    </field>-->
                                </group>
                            </page>
                            <page name="location_details" string="Location Details">
                                <group string="Location Details">
                                    <group>
                                        <field name="service_bld_number"
                                               attrs="{'readonly': [('state', 'in', ('approve','reject'))]}"/>
                                        <field name="service_road_number"
                                               attrs="{'readonly': [('state', 'in', ('approve','reject'))]}"/>
                                        <field name="service_area_number"
                                               attrs="{'readonly': [('state', 'in', ('approve','reject'))]}"/>
                                        <field name="service_area"
                                               attrs="{'readonly': [('state', 'in', ('approve','reject'))]}"/>
                                    </group>
                                    <group>
                                        <field name="service_generator_running_hours"
                                               attrs="{'readonly': [('state', 'in', ('approve','reject'))]}"/>
                                        <field name="service_generator_piu_running_hours"
                                               attrs="{'readonly': [('state', 'in', ('approve','reject'))]}"/>
                                        <field name="service_breakdown_date"
                                               attrs="{'invisible': [('service_type','!=', 'breakdown')]}"/>
                                        <field name="service_initial_fault"
                                               attrs="{'invisible': [('service_type','!=', 'breakdown')]}"/>
                                        <field name="service_rectifications"
                                               attrs="{'invisible': [('service_type','!=', 'breakdown')]}"/>
                                    </group>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="activity_ids" widget="mail_activity"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>
        <record id="view_service_quotation_tree" model="ir.ui.view">
            <field name="name">view.service.quotation.tree</field>
            <field name="model">service.quotation</field>
            <field name="priority" eval="8"/>
            <field name="arch" type="xml">
                <tree create="0">
                    <field name="name"/>
                    <field name="service_customer"/>
                    <field name="service_type"/>
                    <field name="service_date" widget="date"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>
        <record model="ir.actions.act_window" id="action_menu_service_quotation">
            <field name="name">Quotation</field>
            <field name="res_model">service.quotation</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[]</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Click here to View new Service Quotation
                </p>
                <p>
                    Odoo helps you easily track all activities related to Service Quotation.
                </p>
            </field>
        </record>

        <record id="quotation_search_view" model="ir.ui.view">
            <field name="name">Quotaions Search View</field>
            <field name="model">service.quotation</field>
            <field name="arch" type="xml">
                <search string="Search Quotation">
                    <field name="service_customer"/>
                    <field name="service_generator_id"/>
                    <filter string="Draft" name="draft" domain="[('state','=','draft')]"/>
                    <filter string="Approved" name="approve" domain="[('state','=','approve')]"/>
                    <filter string="Rejected" name="reject" domain="[('state','=','reject')]"/>
                    <filter string="Today" name="service_date"
                            domain="[('service_date', '&gt;=', datetime.datetime.now().strftime('%Y-%m-%d 00:00:00')),('service_date', '&lt;=',datetime.datetime.now().strftime('%Y-%m-%d 23:59:59'))]"/>
                    <filter string="Month" name="sevice_month"
                            domain="[('service_date','&gt;=',context_today().strftime('%%Y-%%m-01')),('service_date','&lt;',(context_today()+relativedelta(months=1)).strftime('%%Y-%%m-01'))]"/>
                    <filter string="Next Month" name="next_month"
                            domain="[('service_date','&gt;=',(context_today()+relativedelta(months=1)).strftime('%%Y-%%m-01')),('service_date','&lt;',(context_today()+relativedelta(months=2)).strftime('%%Y-%%m-01'))]"/>
                    <group expand="1" string="Group By">
                        <filter string="Partner" name="service_customer" context="{'group_by':'service_customer'}"/>
                        <filter string="Date" name="service_date" context="{'group_by': 'service_date'}"/>
                    </group>
                </search>
            </field>
        </record>
        <menuitem id="menu_service_quotation" name="Quotation" parent="menu_service_maintenance"
                  action="action_menu_service_quotation"
                  groups="sales_team.group_sale_salesman,generator_service_maintenance.generator_engineer"/>
    </data>
</odoo>